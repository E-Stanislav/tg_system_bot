# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Telegram System Monitoring Bot

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ pm2
./install.sh

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ config.py)
nano config.py

# –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env —Ñ–∞–π–ª–µ
nano .env
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs tg_system_bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
./venv/bin/python main.py --test-config
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
touch .env

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ .env
echo "BOT_TOKEN=your_bot_token_here" >> .env
echo "ADMIN_ID=your_telegram_id" >> .env
echo "LOG_LEVEL=INFO" >> .env
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Telegram

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
```
/status
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
–í—Ä–µ–º—è: 14:30:25
CPU: 15.2%
RAM: 2.1GB/8.0GB (26.3%)
Swap: 0B/2.0GB (0.0%)
CPU Temp: 45.2¬∞C
Uptime: 5d 12h 30m 15s
Users: admin, user1

–î–∏—Å–∫–∏:
/: 45.2GB/120GB (37.7%)
/home: 120GB/500GB (24.0%)

–°–∏—Å—Ç–µ–º–∞:
OS: Ubuntu 22.04.3 LTS
Kernel: 5.15.0-88-generic
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```
/processes
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìà –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤:
1. nginx (PID: 1234)
   CPU: 2.1% | RAM: 1.2% | –°—Ç–∞—Ç—É—Å: running
2. postgres (PID: 5678)
   CPU: 1.8% | RAM: 8.5% | –°—Ç–∞—Ç—É—Å: running
3. docker (PID: 9012)
   CPU: 0.5% | RAM: 2.1% | –°—Ç–∞—Ç—É—Å: running
```

#### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```
/docker
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
–ó–∞–ø—É—â–µ–Ω–æ: 3/4

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
üü¢ nginx
   –°—Ç–∞—Ç—É—Å: Up 2 hours
   –û–±—Ä–∞–∑: nginx:latest
   –ü–æ—Ä—Ç—ã: 80:80, 443:443

üü¢ postgres
   –°—Ç–∞—Ç—É—Å: Up 1 day
   –û–±—Ä–∞–∑: postgres:13
   –ü–æ—Ä—Ç—ã: 5432:5432

üî¥ redis
   –°—Ç–∞—Ç—É—Å: Exited (1) 2 hours ago
   –û–±—Ä–∞–∑: redis:alpine
   –ü–æ—Ä—Ç—ã: 6379:6379
```

#### –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```
/network
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üåê –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 156
–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã: 22, 80, 443, 5432, 6379, 8080

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
eth0:
   –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 1.2GB
   –ü–æ–ª—É—á–µ–Ω–æ: 5.8GB

lo:
   –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 45.2MB
   –ü–æ–ª—É—á–µ–Ω–æ: 45.2MB
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ä–≤–∏—Å–æ–≤
```
/services
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üß∞ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
UNIT                    LOAD   ACTIVE SUB     DESCRIPTION
nginx.service          loaded active running A high performance web server
postgresql.service     loaded active running PostgreSQL RDBMS
docker.service         loaded active running Docker Application Container Engine
redis-server.service   loaded active running Advanced key-value store
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
```
/service restart nginx
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –£—Å–ø–µ—Ö –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ systemctl restart nginx.
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
```
/dockerctl restart redis
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –£—Å–ø–µ—Ö –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ docker restart redis.
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```
/dockerctl logs nginx
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìã –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ nginx:
2024/01/15 14:30:25 [notice] 1#1: start worker processes
2024/01/15 14:30:25 [notice] 1#1: start worker process 1234
2024/01/15 14:30:25 [notice] 1#1: start worker process 1235
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```
/restart
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
```
/update
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ apt update/upgrade –∑–∞–≤–µ—Ä—à–µ–Ω–æ rc=0.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
```

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º —á–µ—Ä–µ–∑ pm2

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã pm2
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
pm2 status tg_system_bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs tg_system_bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs tg_system_bot --lines 100 -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
pm2 restart tg_system_bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
pm2 stop tg_system_bot

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
pm2 start tg_system_bot

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑ pm2
pm2 delete tg_system_bot

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
pm2 save

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
pm2 startup
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
```bash
# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è main.py –∏–ª–∏ config.py
./install.sh

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 reload tg_system_bot

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart tg_system_bot
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
pm2 show tg_system_bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
pm2 logs
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```python
# –í config.py
ALERT_CPU_THRESHOLD = 80.0      # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ 80% CPU
ALERT_RAM_THRESHOLD = 85.0      # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ 85% RAM
ALERT_DISK_THRESHOLD = 15.0     # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ 15% —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```python
# –í config.py
ALERT_SERVICES = [
    "nginx",
    "postgresql", 
    "mysql",
    "docker",
    "redis-server",
    "apache2",
    "your-custom-service"  # –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å
]
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```python
# –í config.py
ALERT_DOCKER_CONTAINERS = [
    "nginx",
    "postgres",
    "mysql", 
    "redis",
    "your-app",           # –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    "database"
]
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
```bash
#!/bin/bash
# restart_services.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
services=("nginx" "postgresql" "redis-server")

for service in "${services[@]}"; do
    echo "–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ $service..."
    sudo systemctl restart $service
    sleep 2
done
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
0 2 * * * cd /path/to/bot && ./venv/bin/python main.py --backup
0 3 * * 0 cd /path/to/bot && ./venv/bin/python main.py --update
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### Prometheus –º–µ—Ç—Ä–∏–∫–∏
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ config.py
INTEGRATION_SETTINGS = {
    "enable_prometheus": True,
    "prometheus_port": 9090,
}
```

#### Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ config.py
INTEGRATION_SETTINGS = {
    "enable_slack": True,
    "slack_webhook": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
}
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å pm2
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ pm2
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ pm2
pm2 logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ pm2
pm2 kill
pm2 start main.py --interpreter venv/bin/python3 --name tg_system_bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ pm2
pm2 startup
pm2 save
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ sudo –ø—Ä–∞–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
sudo -l

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–µ–π –∫–æ–º–∞–Ω–¥
which reboot
which systemctl
which docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã
ls -la main.py
ls -la config.py
ls -la .env
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version
docker ps

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker
sudo systemctl restart docker
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π CPU
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ lm-sensors
sudo apt install lm-sensors
sudo sensors-detect --auto

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
sensors

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.py
TEMP_SENSORS_COMMAND = "sensors -u"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
ip addr show

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
netstat -tlnp

# –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall
sudo ufw status
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
cat .env

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
env | grep BOT
env | grep ADMIN

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
./venv/bin/python -c "import os; from dotenv import load_dotenv; load_dotenv(); print('BOT_TOKEN:', os.getenv('BOT_TOKEN'))"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞
```bash
# –õ–æ–≥–∏ pm2
pm2 logs tg_system_bot

# –õ–æ–≥–∏ pm2 –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs tg_system_bot -f

# –õ–æ–≥–∏ pm2 —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å—Ç—Ä–æ–∫
pm2 logs tg_system_bot --lines 50

# –í—Å–µ –ª–æ–≥–∏ pm2
pm2 logs

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
pm2 flush
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
htop

# –î–∏—Å–∫–∏
df -h
iostat -x 1

# –°–µ—Ç—å
iftop
nethogs

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ pm2
pm2 monit
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl list-units --failed

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker system df
docker system prune

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl --since "1 hour ago" | grep -i error

# –ü—Ä–æ–≤–µ—Ä–∫–∞ pm2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status
pm2 show tg_system_bot
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall
```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É
```python
# –í config.py - —Ç–æ–ª—å–∫–æ –≤–∞—à ID
ADMIN_ID = 123456789  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ID

# –ò–ª–∏ –≤ .env —Ñ–∞–π–ª–µ
# ADMIN_ID=123456789
```

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker –æ–±—Ä–∞–∑–æ–≤
docker system prune -a

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
git pull origin main
./install.sh

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 reload tg_system_bot
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏
```python
# –í config.py
NOTIFICATION_SETTINGS = {
    "check_interval": 30,  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```python
# –í config.py
METRICS_SETTINGS = {
    "enable_caching": True,
    "cache_ttl": 60,  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
}
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ pm2
```bash
# –ó–∞–ø—É—Å–∫ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
pm2 start main.py --interpreter venv/bin/python3 --name tg_system_bot --max-memory-restart 300M

# –ò–ª–∏ —á–µ—Ä–µ–∑ ecosystem.config.js
cat > ecosystem.config.js <<EOF
module.exports = {
  apps : [{
    name: "tg_system_bot",
    script: "./main.py",
    interpreter: "./venv/bin/python",
    max_memory_restart: "300M",
    node_args: "--max-old-space-size=300"
  }]
}
EOF
pm2 start ecosystem.config.js
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   ```bash
   cp config.py config.py.backup
   cp .env .env.backup
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**
   ```bash
   pm2 logs tg_system_bot --lines 100
   ```

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º**
   ```bash
   ./venv/bin/python main.py --test-config
   ```

4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   ```bash
   git add .
   git commit -m "Update bot configuration"
   ```

5. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
   ```bash
   git pull origin main
   ./install.sh
   ```

6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   ```bash
   pm2 status
   sudo journalctl --since "1 hour ago" | grep -i error
   ```

7. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**
   ```bash
   # –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
   cat > restore.sh <<EOF
   #!/bin/bash
   git pull origin main
   ./install.sh
   pm2 reload tg_system_bot
   EOF
   chmod +x restore.sh
   ```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å systemd –Ω–∞ pm2

–ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª–∞ –ø—Ä–µ–¥—ã–¥—É—â–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ systemd:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl stop telegram-bot
sudo systemctl disable telegram-bot

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
sudo rm /etc/systemd/system/telegram-bot.service
sudo systemctl daemon-reload

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pm2
./install.sh
``` 